# Cinema Booking Frontend

Веб-приложение для бронирования билетов в кинотеатр, разработанное на Vue 3 с TypeScript.

## Технологический стек

- **Vue 3** (Composition API)
- **TypeScript**
- **Vite** - сборщик и dev-сервер
- **Vue Router** - маршрутизация
- **Pinia** - управление состоянием
- **axios** - HTTP клиент
- **Vitest** - тестирование

## Установка зависимостей

```bash
npm install
```

## Запуск проекта

### Разработка

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173` (или другому порту, если 5173 занят).

### Сборка для продакшена

```bash
npm run build
```

Собранные файлы будут находиться в папке `dist`.

### Предпросмотр продакшен сборки

```bash
npm run preview
```

## Запуск тестов

```bash
npm test
```

Запуск тестов с UI:

```bash
npm run test:ui
```

## Структура проекта

```
frontend/
├── src/
│   ├── components/       # Переиспользуемые компоненты
│   │   ├── AppLayout.vue
│   │   ├── Navigation.vue
│   │   ├── SeatGrid.vue
│   │   ├── BookingCard.vue
│   │   └── PaymentTimer.vue
│   ├── views/            # Страницы приложения
│   │   ├── Movies.vue
│   │   ├── MovieDetail.vue
│   │   ├── Cinemas.vue
│   │   ├── CinemaDetail.vue
│   │   ├── Booking.vue
│   │   ├── MyBookings.vue
│   │   ├── Login.vue
│   │   └── Register.vue
│   ├── stores/           # Pinia stores
│   │   └── auth.ts
│   ├── router/           # Vue Router конфигурация
│   │   └── index.ts
│   ├── utils/            # Утилиты
│   │   ├── api.ts
│   │   ├── validation.ts
│   │   └── date.ts
│   ├── App.vue
│   └── main.ts
├── vite.config.ts
├── tsconfig.json
└── package.json
```

## Основной функционал

### Авторизация и регистрация

- **Регистрация**: username (минимум 8 символов), password (минимум 8 символов, 1 заглавная буква, 1 цифра)
- **Авторизация**: вход по username и password
- JWT токен сохраняется в localStorage
- После успешной авторизации/регистрации редирект на страницу "Мои билеты"

### Просмотр фильмов и кинотеатров

- Список фильмов с постерами, продолжительностью и рейтингом
- Детальная страница фильма с сеансами, сгруппированными по датам и кинотеатрам
- Список кинотеатров
- Детальная страница кинотеатра с сеансами, сгруппированными по датам и фильмам

### Бронирование билетов

- Выбор мест в зале (прямоугольная сетка)
- Визуальное отображение свободных, занятых и выбранных мест
- Для неавторизованных пользователей - только просмотр, кнопка ведет на страницу входа
- Для авторизованных - возможность бронирования мест

### Управление заказами

- Страница "Мои билеты" доступна только для авторизованных пользователей
- Билеты сгруппированы в категории:
  - **Неоплаченные**: с кнопкой оплаты и таймером
  - **Будущие**: оплаченные билеты на будущие сеансы
  - **Прошедшие**: билеты на прошедшие сеансы
- Автоматическое удаление неоплаченных билетов при истечении времени оплаты

## API

Приложение использует API бэкенда, доступное на `http://localhost:3022`.

Основные эндпоинты:
- `POST /login` - авторизация
- `POST /register` - регистрация
- `GET /movies` - список фильмов
- `GET /movies/:id/sessions` - сеансы фильма
- `GET /cinemas` - список кинотеатров
- `GET /cinemas/:id/sessions` - сеансы кинотеатра
- `GET /movieSessions/:id` - детали сеанса
- `POST /movieSessions/:id/bookings` - бронирование мест
- `GET /me/bookings` - билеты пользователя
- `POST /bookings/:id/payments` - оплата билета
- `GET /settings` - настройки приложения

## Особенности реализации

- Использование промисов вместо try-catch для обработки ошибок
- Обработчики onSuccess/onError/onSettled вынесены наружу
- Избегание глубокой вложенности кода
- Использование объектных маппингов вместо switch-case
- Ранний return для упрощения логики

## Тестирование

Тесты написаны для:
- Утилиты валидации форм
- Компонент SeatGrid (выбор мест)
- Компонент PaymentTimer (таймер оплаты)
- Store авторизации

## Требования

- Node.js 18+
- npm или yarn
- Запущенный бэкенд на `http://localhost:3022` (для работы приложения)

